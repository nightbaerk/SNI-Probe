# üì° SNI Probe ‚Äî –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üéØ –ß—Ç–æ —ç—Ç–æ –∏ –∑–∞—á–µ–º –Ω—É–∂–Ω–æ

**SNI Probe** ‚Äî –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –ø–æ SNI (Server Name Indication) —É –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ **VLESS + TCP + REALITY**.

### –ü—Ä–æ–±–ª–µ–º–∞, –∫–æ—Ç–æ—Ä—É—é —Ä–µ—à–∞–µ—Ç

–ö–æ–≥–¥–∞ –≤—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç–µ VPN —Å –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º REALITY:
- –ö–ª–∏–µ–Ω—Ç –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ **–≤–∞—à–µ–º—É —Å–µ—Ä–≤–µ—Ä—É** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `111.111.111.111:8080`)
- –ù–æ –≤–Ω—É—Ç—Ä–∏ TLS-—Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è —É–∫–∞–∑—ã–≤–∞–µ—Ç **—á—É–∂–æ–π –¥–æ–º–µ–Ω** –∫–∞–∫ SNI (–Ω–∞–ø—Ä–∏–º–µ—Ä, `catalog.api.2gis.com`)
- –ü—Ä–æ–≤–∞–π–¥–µ—Ä –≤–∏–¥–∏—Ç —ç—Ç–æ—Ç SNI –∏ –º–æ–∂–µ—Ç **–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ**, –µ—Å–ª–∏ –¥–æ–º–µ–Ω –≤ —á—ë—Ä–Ω–æ–º —Å–ø–∏—Å–∫–µ
- –í–∞—à REALITY-—Å–µ—Ä–≤–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ –∏ —Ä–µ—à–∞–µ—Ç, –ø—É—Å–∫–∞—Ç—å –ª–∏ –∫–ª–∏–µ–Ω—Ç–∞

**–ó–∞–¥–∞—á–∞**: –Ω–∞–π—Ç–∏ –¥–æ–º–µ–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –ù–ï –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º –∏ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è –º–∞—Å–∫–∏—Ä–æ–≤–∫–∏.

---

## üî¨ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∞

### –î–≤–∞ —Ç–∏–ø–∞ –ø—Ä–æ–≤–µ—Ä–æ–∫

#### 1Ô∏è‚É£ **Control Check** (–∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞)
–ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É –¥–æ–º–µ–Ω—É:
```
–í–∞—à –∫–æ–º–ø—å—é—Ç–µ—Ä ‚Üí catalog.api.2gis.com:443
```

**–¶–µ–ª—å**: –ø–æ–Ω—è—Ç—å, –¥–æ—Å—Ç—É–ø–µ–Ω –ª–∏ —Å–∞–º –¥–æ–º–µ–Ω —Å –≤–∞—à–µ–≥–æ IP/–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã**:
- `ok:TLSv1.3:45ms` ‚Äî –¥–æ–º–µ–Ω –¥–æ—Å—Ç—É–ø–µ–Ω, TLS —Ä–∞–±–æ—Ç–∞–µ—Ç, –∑–∞–¥–µ—Ä–∂–∫–∞ 45 –º—Å
- `fail:timeout:6000ms` ‚Äî –¥–æ–º–µ–Ω –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (–º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –∏–ª–∏ –æ—Ñ–ª–∞–π–Ω)

#### 2Ô∏è‚É£ **Probe Check** (—Ç–µ—Å—Ç–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞)
–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ **–≤–∞—à–µ–º—É —Å–µ—Ä–≤–µ—Ä—É**, –Ω–æ —Å SNI —á—É–∂–æ–≥–æ –¥–æ–º–µ–Ω–∞:
```
–í–∞—à –∫–æ–º–ø—å—é—Ç–µ—Ä ‚Üí –í–ê–®_–°–ï–†–í–ï–†_IP:8080
                 (–Ω–æ –≤ TLS ClientHello –ø–∏—à–µ–º SNI: catalog.api.2gis.com)
```

**–¶–µ–ª—å**: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –±–ª–æ–∫–∏—Ä—É–µ—Ç –ª–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ SNI.

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã**:
- `ok` ‚Äî —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø—Ä–æ—à–ª–æ, SNI –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω ‚úÖ
- `fail` ‚Äî –ø—Ä–æ–≤–∞–π–¥–µ—Ä —Å–±—Ä–æ—Å–∏–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ (reset/timeout) ‚ùå

---

## üìä –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ò–¥–µ–∞–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π
```
Control: ok:TLSv1.3:45ms
Probe:   ok (latency: 120ms)
```
‚úÖ **–î–æ–º–µ–Ω –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è REALITY** ‚Äî –∏ —Å–∞–º –¥–æ—Å—Ç—É–ø–µ–Ω, –∏ SNI –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è.

### –î–æ–º–µ–Ω –æ—Ñ–ª–∞–π–Ω/–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω, –Ω–æ SNI –ø—Ä–æ—Ö–æ–¥–∏—Ç
```
Control: fail:timeout:6000ms
Probe:   ok (latency: 110ms)
```
‚úÖ **–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å** ‚Äî –ø—Ä–æ–≤–∞–π–¥–µ—Ä –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç SNI —ç—Ç–æ–≥–æ –¥–æ–º–µ–Ω–∞, –¥–∞–∂–µ –µ—Å–ª–∏ —Å–∞–º –¥–æ–º–µ–Ω –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.

### SNI –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º
```
Control: ok:TLSv1.3:50ms
Probe:   fail (connection reset by peer, latency: 15ms)
```
‚ùå **–ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å** ‚Äî –ø—Ä–æ–≤–∞–π–¥–µ—Ä —Ä–µ–∂–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —ç—Ç–∏–º SNI. –ë—ã—Å—Ç—Ä–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ (15ms) = –ª–æ–∫–∞–ª—å–Ω—ã–π DPI.

### –û—à–∏–±–∫–∞ REALITY-—Å–µ—Ä–≤–µ—Ä–∞
```
Control: ok:TLSv1.3:60ms
Probe:   ok (WRONG_VERSION_NUMBER, latency: 130ms)
```
‚úÖ **–û—Ç–ª–∏—á–Ω–æ!** ‚Äî —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–æ—à–ª–æ –¥–æ —Å–µ—Ä–≤–µ—Ä–∞, –Ω–æ REALITY –æ—Ç–≤–µ—Ä–≥ –µ–≥–æ (–Ω–æ—Ä–º–∞–ª—å–Ω–æ, —Ç.–∫. –º—ã –Ω–µ –¥–µ–ª–∞–µ–º –ø–æ–ª–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é). SNI –ø—Ä–æ—à—ë–ª —Ñ–∏–ª—å—Ç—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.

---

## ‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
```bash
--server-ip 111.111.111.111   # IP –≤–∞—à–µ–≥–æ REALITY-—Å–µ—Ä–≤–µ—Ä–∞
--domains whitelist.txt        # –§–∞–π–ª —Å–æ —Å–ø–∏—Å–∫–æ–º –¥–æ–º–µ–Ω–æ–≤ (–ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ —Å—Ç—Ä–æ–∫—É)
```

### –û—Å–Ω–æ–≤–Ω—ã–µ
```bash
--server-port 8080             # –ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 443)
--out results.csv              # –ò–º—è –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
--isp "Rostelecom"                # –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (–¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏)
--where "Moscow"               # –õ–æ–∫–∞—Ü–∏—è (–≥–æ—Ä–æ–¥/—Ä–µ–≥–∏–æ–Ω)
```

### –ö–æ–Ω—Ç—Ä–æ–ª—å –ø–æ–≤–µ–¥–µ–Ω–∏—è
```bash
--no-control                   # –ù–µ –¥–µ–ª–∞—Ç—å control checks (–±—ã—Å—Ç—Ä–µ–µ, –Ω–æ –º–µ–Ω—å—à–µ –¥–∞–Ω–Ω—ã—Ö)
--timeout 8.0                  # –¢–∞–π–º–∞—É—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
--workers 10                   # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ (1-50)
--quiet                        # –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å (–¥–ª—è cron-–∑–∞–¥–∞—á)
```

### –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—à–∏–±–æ–∫ (–≤–∞–∂–Ω–æ –¥–ª—è REALITY!)
```bash
--ok-on-wrong-version          # –°—á–∏—Ç–∞—Ç—å "WRONG_VERSION_NUMBER" —É—Å–ø–µ—à–Ω—ã–º
--ok-on-alert                  # –°—á–∏—Ç–∞—Ç—å TLS alerts —É—Å–ø–µ—à–Ω—ã–º–∏
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**:
- `--ok-on-wrong-version` ‚Äî **–≤—Å–µ–≥–¥–∞** –¥–ª—è REALITY (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞)
- `--ok-on-alert` ‚Äî –µ—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –º–Ω–æ–≥–æ false negatives (–¥–æ–º–µ–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ fail)

---

## üöÄ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ë–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç —Å –æ–¥–Ω–∏–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º
```bash
python sni_probe.py \
  --server-ip 111.111.111.111 \
  --server-port 8080 \
  --domains whitelist.txt \
  --out rostelecom_moscow.csv \
  --isp "Rostelecom" \
  --where "Moscow" \
  --ok-on-wrong-version \
  --ok-on-alert
```

### –ë—ã—Å—Ç—Ä–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–º–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–æ–≤)
```bash
python sni_probe.py \
  --server-ip 111.111.111.111 \
  --server-port 8080 \
  --domains large_list.txt \
  --out quick_test.csv \
  --workers 30 \
  --timeout 5.0 \
  --no-control \
  --ok-on-wrong-version \
  --quiet
```

### –ê–∫–∫—É—Ä–∞—Ç–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–∏–∑–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞)
```bash
python sni_probe.py \
  --server-ip 111.111.111.111 \
  --server-port 8080 \
  --domains sensitive_list.txt \
  --out careful_test.csv \
  --workers 3 \
  --timeout 10.0 \
  --isp "Rostelecom" \
  --ok-on-wrong-version
```

### –ù–æ—á–Ω–æ–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (cron-–∑–∞–¥–∞—á–∞)
```bash
#!/bin/bash
DATE=$(date +%Y%m%d_%H%M)
python sni_probe.py \
  --server-ip 111.111.111.111 \
  --server-port 8080 \
  --domains daily_check.txt \
  --out "results/rostelecom_${DATE}.csv" \
  --isp "Rostelecom" \
  --where "Moscow" \
  --quiet \
  --ok-on-wrong-version \
  --ok-on-alert
```

---

## üìÅ –§–æ—Ä–º–∞—Ç –≤—ã—Ö–æ–¥–Ω–æ–≥–æ CSV

–ö–æ–ª–æ–Ω–∫–∏ –≤ —Ñ–∞–π–ª–µ `results.csv`:

| –ö–æ–ª–æ–Ω–∫–∞ | –ü—Ä–∏–º–µ—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|--------|----------|
| `timestamp` | `2024-10-24T15:30:45Z` | –í—Ä–µ–º—è –ø—Ä–æ–≤–µ—Ä–∫–∏ (UTC) |
| `isp_name` | `Rostelecom` | –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ |
| `probe_location` | `Moscow` | –ì–æ—Ä–æ–¥/—Ä–µ–≥–∏–æ–Ω |
| `server_ip` | `111.111.111.111` | IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ |
| `server_port` | `8080` | –ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ |
| `domain` | `catalog.api.2gis.com` | –ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–π –¥–æ–º–µ–Ω |
| `sni` | `catalog.api.2gis.com` | SNI (–æ–±—ã—á–Ω–æ = domain) |
| `control_tcp_443` | `ok:45ms` | –†–µ–∑—É–ª—å—Ç–∞—Ç TCP-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –¥–æ–º–µ–Ω—É |
| `control_tls_handshake` | `ok:TLSv1.3:50ms` | –†–µ–∑—É–ª—å—Ç–∞—Ç TLS –∫ –¥–æ–º–µ–Ω—É |
| `probe_tls_to_server_with_sni` | `ok` / `fail` | **–ì–ª–∞–≤–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç** ‚Äî –ø—Ä–æ—à—ë–ª –ª–∏ SNI |
| `probe_error` | `connection reset by peer` | –¢–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ (–µ—Å–ª–∏ fail) |
| `notes` | `proto=TLSv1.3,lat=120ms` | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è |

---

## üßÆ –ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö

### –ë—ã—Å—Ç—Ä–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É
```bash
# –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö SNI
awk -F';' 'NR>1 && $10=="ok" {ok++} NR>1 {total++} END {print ok/total*100"%"}' results.csv

# –¢–æ–ø-10 —Å–∞–º—ã—Ö –±—ã—Å—Ç—Ä—ã—Ö –¥–æ–º–µ–Ω–æ–≤
awk -F';' 'NR>1 && $10=="ok" {print $6, $12}' results.csv | sort -k2 -n | head -10

# –¢–∏–ø—ã –æ—à–∏–±–æ–∫ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
awk -F';' 'NR>1 && $10=="fail" {print $11}' results.csv | sort | uniq -c | sort -rn
```

### Python-–∞–Ω–∞–ª–∏–∑
```python
import pandas as pd

df = pd.read_csv("results.csv", delimiter=";")

# –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—Ö–∞ –ø–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º
success_rate = df.groupby("isp_name")["probe_tls_to_server_with_sni"].apply(
    lambda x: (x == "ok").sum() / len(x) * 100
)
print("Success rate by ISP:")
print(success_rate)

# –î–æ–º–µ–Ω—ã —Å —Å–∞–º–æ–π –Ω–∏–∑–∫–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
df_ok = df[df["probe_tls_to_server_with_sni"] == "ok"].copy()
df_ok["latency"] = df_ok["notes"].str.extract(r'lat=(\d+)ms').astype(float)
top_fast = df_ok.nsmallest(20, "latency")[["domain", "latency"]]
print("\nFastest domains:")
print(top_fast)

# –ü–∞—Ç—Ç–µ—Ä–Ω—ã –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
df_fail = df[df["probe_tls_to_server_with_sni"] == "fail"]
print("\nBlocking patterns:")
print(df_fail["probe_error"].value_counts())
```

---

## üé® –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

```python
import pandas as pd
import matplotlib.pyplot as plt

df = pd.read_csv("results.csv", delimiter=";")

# –ì—Ä–∞—Ñ–∏–∫ 1: –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –ø–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º
success = df.groupby("isp_name")["probe_tls_to_server_with_sni"].apply(
    lambda x: (x == "ok").sum() / len(x) * 100
)
success.plot(kind="bar", title="SNI Success Rate by ISP", ylabel="%")
plt.tight_layout()
plt.savefig("success_by_isp.png")

# –ì—Ä–∞—Ñ–∏–∫ 2: –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–µ–∫
df_ok = df[df["probe_tls_to_server_with_sni"] == "ok"].copy()
df_ok["latency"] = df_ok["notes"].str.extract(r'lat=(\d+)ms').astype(float)
df_ok["latency"].hist(bins=50, title="Latency Distribution (ms)")
plt.xlabel("Latency (ms)")
plt.ylabel("Count")
plt.savefig("latency_distribution.png")
```

---

## üîç –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—à–∏–±–æ–∫

### ‚úÖ –°—á–∏—Ç–∞—é—Ç—Å—è —É—Å–ø–µ—à–Ω—ã–º–∏ (—Å —Ñ–ª–∞–≥–∞–º–∏)

**–° `--ok-on-wrong-version`:**
- `SSL: WRONG_VERSION_NUMBER` ‚Äî —Å–µ—Ä–≤–µ—Ä –ø–æ–ª—É—á–∏–ª –ø–∞–∫–µ—Ç, –Ω–æ –≤–µ—Ä—Å–∏—è TLS –Ω–µ —Å–æ–≤–ø–∞–ª–∞
- `SSL: PROTOCOL_VERSION` ‚Äî –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ
- `SSL: UNRECOGNIZED_NAME` ‚Äî —Å–µ—Ä–≤–µ—Ä –Ω–µ –æ–∂–∏–¥–∞–ª —ç—Ç–æ—Ç SNI
- `SSL: CERTIFICATE_UNKNOWN` ‚Äî –ø—Ä–æ–±–ª–µ–º–∞ —Å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- `SSL: BAD_CERTIFICATE` ‚Äî –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ

**–° `--ok-on-alert`:**
- `TLSv1 alert *` (–∫—Ä–æ–º–µ internal error) ‚Äî TLS-–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞

**–ü–æ—á–µ–º—É —ç—Ç–æ ok**: –≠—Ç–∏ –æ—à–∏–±–∫–∏ –æ–∑–Ω–∞—á–∞—é—Ç, —á—Ç–æ **–ø–∞–∫–µ—Ç –¥–æ—à—ë–ª –¥–æ —Å–µ—Ä–≤–µ—Ä–∞**, –∞ –∑–Ω–∞—á–∏—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª SNI –Ω–∞ —É—Ä–æ–≤–Ω–µ DPI.

### ‚ùå –í—Å–µ–≥–¥–∞ —Å—á–∏—Ç–∞—é—Ç—Å—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π

- `Connection reset by peer` ‚Äî —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å–±—Ä–æ—à–µ–Ω–æ (–æ–±—ã—á–Ω–æ DPI)
- `Connection refused` ‚Äî –ø–æ—Ä—Ç –∑–∞–∫—Ä—ã—Ç –∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä
- `Timed out` / `Operation timed out` ‚Äî —Ç–∞–π–º–∞—É—Ç (–º–æ–∂–µ—Ç –±—ã—Ç—å —á—ë—Ä–Ω–∞—è –¥—ã—Ä–∞)
- `Network unreachable` ‚Äî –ø—Ä–æ–±–ª–µ–º—ã —Å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–µ–π

### üïê –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–µ–∫

| –ó–∞–¥–µ—Ä–∂–∫–∞ | –í–µ—Ä–æ—è—Ç–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ |
|----------|-------------------|
| < 50ms | –õ–æ–∫–∞–ª—å–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ (DPI –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞) |
| 50-200ms | –ù–æ—Ä–º–∞–ª—å–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–æ —Å–µ—Ä–≤–µ—Ä–∞ |
| 200-1000ms | –í—ã—Å–æ–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (–¥–∞–ª—å–Ω–∏–π —Å–µ—Ä–≤–µ—Ä / –ø–ª–æ—Ö–æ–π —Ä–æ—É—Ç–∏–Ω–≥) |
| > 5000ms | –ë–ª–∏–∑–∫–æ –∫ —Ç–∞–π–º–∞—É—Ç—É, –≤–æ–∑–º–æ–∂–Ω–∞ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—è |

---

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —ç—Ç–∏–∫–∞

### ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞

1. **–ù–µ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –±–µ–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è** –Ω–∞ —á—É–∂–∏—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ IP-–∞–¥—Ä–µ—Å–∞** –≤ `--server-ip`
3. **–ù–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞–π—Ç–µ —Å–µ—Ä–≤–µ—Ä** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑—É–º–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ workers (5-20)
4. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∑–∞–∫–æ–Ω–Ω–æ—Å—Ç—å** –≤ –≤–∞—à–µ–π —é—Ä–∏—Å–¥–∏–∫—Ü–∏–∏
5. **–ù–µ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ** –∫—Ä–∏—Ç–∏—á–µ—Å–∫—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É (–±–∞–Ω–∫–∏, –≥–æ—Å—Å–∞–π—Ç—ã, –º–µ–¥–∏—Ü–∏–Ω—É)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- –î–µ–ª–∞–π—Ç–µ –ø–µ—Ä–µ—Ä—ã–≤—ã –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏ (–º–∏–Ω–∏–º—É–º 10 –º–∏–Ω—É—Ç)
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--timeout 8-10` –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏
- –ù–∞—á–∏–Ω–∞–π—Ç–µ —Å `--workers 5` –∏ —É–≤–µ–ª–∏—á–∏–≤–∞–π—Ç–µ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –ø—Ä–∏–∑–Ω–∞–∫–∏ –±–∞–Ω–∞

---

## üêõ –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –í—Å–µ –¥–æ–º–µ–Ω—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç `fail`
**–ü—Ä–∏—á–∏–Ω–∞**: –°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω REALITY  
**–†–µ—à–µ–Ω–∏–µ**: 
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞: `telnet 111.111.111.111 8080`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ REALITY —Å–ª—É—à–∞–µ—Ç –Ω–∞ —ç—Ç–æ–º –ø–æ—Ä—Ç—É
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π—Ä–≤–æ–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### –û—á–µ–Ω—å –Ω–∏–∑–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
**–ü—Ä–∏—á–∏–Ω–∞**: –°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π —Ç–∞–π–º–∞—É—Ç –∏–ª–∏ –º–∞–ª–æ workers  
**–†–µ—à–µ–Ω–∏–µ**: `--timeout 5.0 --workers 20`

### –ú–Ω–æ–≥–æ `WRONG_VERSION_NUMBER`, –Ω–æ –≤—Å–µ –≤ fail
**–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ —É–∫–∞–∑–∞–Ω —Ñ–ª–∞–≥ `--ok-on-wrong-version`  
**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ—Ç —Ñ–ª–∞–≥ ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è REALITY

### CSV-—Ñ–∞–π–ª –ø—É—Å—Ç–æ–π
**–ü—Ä–∏—á–∏–Ω–∞**: –û—à–∏–±–∫–∞ –∑–∞–ø–∏—Å–∏ –∏–ª–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã  
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å –≤ `--out`

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- **REALITY –ø—Ä–æ—Ç–æ–∫–æ–ª**: https://github.com/XTLS/REALITY
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è VLESS**: https://xtls.github.io/
- **–ê–Ω–∞–ª–∏–∑ DPI**: https://github.com/ValdikSS/GoodbyeDPI

---

## ü§ù Contributing

–ï—Å–ª–∏ –≤—ã –Ω–∞—à–ª–∏ –±–∞–≥ –∏–ª–∏ —Ö–æ—Ç–∏—Ç–µ —É–ª—É—á—à–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ø–∏—Å–æ–∫ open issues
2. –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–¥—Ä–æ–±–Ω—ã–π issue —Å –ø—Ä–∏–º–µ—Ä–æ–º
3. –ü—Ä–µ–¥–ª–æ–∂–∏—Ç–µ pull request —Å —Ç–µ—Å—Ç–∞–º–∏

---

**–í–µ—Ä—Å–∏—è**: 2.0 (—Å –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–æ–º –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π)  
**–õ–∏—Ü–µ–Ω–∑–∏—è**: MIT  
**–ê–≤—Ç–æ—Ä**: VPN Research Community
